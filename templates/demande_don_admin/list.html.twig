{% extends 'baseB.html.twig' %}
{% block body %}
  <div class="nk-content">
                    <div class="container">
                        <div class="nk-content-inner">
                            <div class="nk-content-body">
                                <div class="nk-block-head">
                                    <div class="nk-block-head-between flex-wrap gap g-2">
                                        <div class="nk-block-head-content">
                                            <h2 class="nk-block-title">Liste des demandes dons 
                                                </h1>
                                                <nav>
                                                    
                                                </nav>
                                        </div>
                                        <div class="nk-block-head-content">
                                            
                                        </div>
                                    </div>
                                </div>
                                <div class="nk-block">
                                    <div class="card">
                                   <div class="search-bar">
  <form action="{{ path('app_demandes_dons_back') }}" method="get">
    <div class="search-container">
      <input type="text" name="search" placeholder="Recherche...">
      <button type="submit"><i class="fas fa-search"></i></button>
    </div>
  </form>
<a href="{{ path('PDF_demandesdons')}}" class="btn btn-pdf btn-custom">
    <i class="fas fa-file-pdf"></i> &nbsp; PDF
</a>
<a href="{{ path('excel_demandesdons')}}" class="btn btn-excel btn-custom">
    <i class="fas fa-file-excel"></i>  &nbsp; Excel
</a>
<a href="{{ path('dons_stats2')}}" class="btn btn-stats btn-custom">
    <i class="fas fa-chart-pie"></i>  &nbsp; Statistiques
</a>


  
</div>
<style>
.btn-pdf {
background-color: #FF0000;
border-color: #FF0000;
color: #FFFFFF;
margin-left: 10px;

}

.btn-excel {
background-color: Green;
border-color: Green;
color: #FFFFFF;
margin-left: 10px;

}

.btn-stats {
background-color: BLue;
border-color: Blue;
color: #FFFFFF;
margin-left: 10px;

}

.search-bar {
  display: flex;
  justify-content: center;
  margin: 20px 0;
}

.search-container {
  display: flex;
  position: relative;
  width: 400px;
  height: 40px;
  background-color: #fff;
  border-radius: 20px;
  overflow: hidden;
  border: 2px solid #ccc;
}

.search-container input[type="text"] {
  width: 100%;
  height: 100%;
  padding: 10px 20px;
  font-size: 16px;
  border: none;
  outline: none;
}

.search-container button {
  position: absolute;
  top: 0;
  right: 0;
  height: 100%;
  width: 60px;
  background-color: #5f38f9;
  color: #fff;
  border: none;
  border-radius: 0 20px 20px 0;
  cursor: pointer;
}

.search-container button i {
  font-size: 20px;
  padding: 10px;
}

.search-container button:hover {
  background-color: #286090;
}

</style>
                                 

                                        <table class="datatable-init table" data-nk-container="table-responsive">
                                            <thead class="table-light">
                                                <tr>
                                                    <th class="tb-col tb-col-check" data-sortable="false">
                                                        <div class="form-check">
                                                            <input class="form-check-input" type="checkbox" value="">
                                                        </div>
                                                    </th>
                                                    {% if demandedons|length > 0 %}
                                                    <th class="tb-col">
                                                        <span class="overline-title">Utilisateur</span>
                                                    </th>
                                                    <th class="tb-col">
                                                        <span class="overline-title">Type Produit Demandé</span>
                                                    </th>
                                                    <th class="tb-col">
                                                        <span class="overline-title">Justificatif handicapé</span>
                                                    </th>
                                                 
                                                    <th class="tb-col tb-col-xl">
                                                        <span class="overline-title">Remarques</span>
                                                    </th>
                                                    <th class="tb-col tb-col-xl">
                                                        <span class="overline-title">Date de demande</span>
                                                    </th>
                                                   <th class="tb-col tb-col-xl">
                                                        <span class="overline-title">état</span>
                                                    </th>
                                                    <th class="tb-col tb-col-end" data-sortable="false">
                                                        <span class="overline-title">Actions</span>
                                                    </th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                        {% for cl in demandedons  %}
                                                <tr>
                                                    <td class="tb-col tb-col-check">
                                                        <div class="form-check">
                                                            <input class="form-check-input" type="checkbox" value="">
                                                        </div>
                                                    </td>
                                                    <td class="tb-col">
                                                       {{ cl.idUtilisateur.nom ~" "~cl.idUtilisateur.prenom }}
                                                    </td>
                                                    <td class="tb-col">
                                                      {{ cl.typeProduitDemande }}
                                                    </td>
                                                    <td class="tb-col">
                       
                                 {% if cl.justificatifHandicap is null %}
                                Pas d'image insérée
                            {% else %}
                                <img src="{{ asset('uploads/'~ cl.justificatifHandicap ) }}" width="250" height="150">
                                    <br>{{ cl.justificatifHandicap }}
                                    {% endif %}
                            
                            </td>
                        </div>
                    </td>
                                                   
                                                    <td class="tb-col">
                                                        <span>{{ cl.remarques }}</span>
                                                    </td>
                                                    <td class="tb-col">
                                                        <span>{{ cl.dateDemande|date('d/m/Y')  }}</span>
                                                    </td>
                                                     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />

  <td class="tb-col">
    {% if cl.etat == "En cours" or cl.etat == "en cours"  %}
        <span class="icon"><i class="fas fa-circle-notch fa-spin" style="color:orange;"> </i></span>
        <span style="color: orange;">En cours</span>
    {% elseif cl.etat == "refuse" %}
        <span class="icon"><i class="fas fa-times-circle" style="color:red;"></i></span>
        <br>
        <span style="color: red;">{{ cl.etat }}</span>
    {% else %}
        <span class="icon"><i class="fas fa-check-circle" style="color:green;"></i></span>
        <span style="color: green;">{{ cl.etat }}</span>
    {% endif %}
</td>

                                                    <td class="tb-col tb-col-end">
                                                        <div class="d-flex justify-content-end gap g-2">
                                                            <div class="gap-col">
                                                                <button type="button"
                                                                    class="btn btn-sm btn-icon btn-lighter"
                                                                    title="Print">
                                                                 
  <path d="M0 0h24v24H0z" fill="none"/>
  <path d="M21 7h-6V3h-4v4H3c-.55 0-1 .45-1 1v8c0 .55.45 1 1 1h2v4h14v-4h2c.55 0 1-.45 1-1V8c0-.55-.45-1-1-1zm-6 7H9v-2h6v2zm4-4H5V9h14v1z"/>
</svg>

                                                                </button>
                                                            </div>
                                                            <div class="gap-col">
                                                           
                                                                       
                                    <a href="{{ path('app_update_demandedon_admin', {'id':cl.idDemandeDon}) }}" class="btn btn-primary">Répondre</a>
                                  <br><br>
                                                           
                                                                          <a href="{{ path('app_remove_demandedon_admin', {'id':cl.idDemandeDon}) }}" class="btn btn-danger">Supprimer</a> <br> 
                                
                                                           
                                                            </div>
                                                        </div>
                                                    </td>
                                                </tr>
                                                {% endfor %}	
                                     
                                            </tbody>
                                        </table>
                                     
                                    </div>
                                </div>
                            </div>
                                       <div style="width: 300px; margin: 0 auto;">
    {{ knp_pagination_render((demandedons) ) }} <!-- affichage des liens de pagination -->
    </div>
                        </div>
                    </div>
                </div>
                
                {% else %}
                  <br>
    <p>Aucun demande don trouvée.</p>
{% endif %}

{% endblock %}