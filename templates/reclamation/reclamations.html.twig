{% extends "baseF.html.twig" %}
{% block body

 %}
	<html
		lang="en" dir="ltr">
		<!-- Mirrored from red-parts.html.themeforest.scompiler.ru/themes/red-ltr/account-garage.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 21 Mar 2023 22:33:57 GMT -->


		<body>
			<!-- site -->
			<div
				class="site">

				<!-- site__body -->
				<div class="site__body">
					<div class="block-space block-space--layout--after-header"></div>
					<div class="block">
						<div class="container container--max--xl">
							<div class="row">
								<div class="col-12 col-lg-3 d-flex">
									<div class="account-nav flex-grow-1">
										<h4 class="account-nav__title">Navigation</h4>
										<ul class="account-nav__list">
											
											<li class="account-nav__item">
												<a href="{{path('app_add_reclamation')}}">Ajouter une reclamation</a>
											</li>

											<li class="account-nav__item account-nav__item--active">
												<a href="{{path('app_list_reclamation')}}">Mes reclamations</a>
											</li>
											<li class="account-nav__item">
												<a href="{{path('app_update_user',{ 'id':app.user.id})}}">Modifier mon Profile</a>
											</li>


											<li class="account-nav__item">
												<a href="{{path('app_forgot_password_request')}}">Mot de passe oublié
												</a>
											</li>
											<li class="account-nav__divider" role="presentation"></li>
											<li class="account-nav__item">
												<a href="{{path('app_logout')}}">Logout</a>
											</li>
										</ul>
									</div>
								</div>
								<div class="col-12 col-lg-9 mt-4 mt-lg-0">
									<div class="card">
										<div class="card-header">
											<h5>Mes reclamations
											</h5>
										</div>
										<div class="card-divider"></div>
										<div class="card-body card-body--padding--2">
											<div class="vehicles-list vehicles-list--layout--account">
												<div class="vehicles-list__body">
													{% for r in reclamations %}
														<div class="vehicles-list__item">
															<div class="vehicles-list__item-info">
																<div class="vehicles-list__item-name">{{ r.getTypeReclamation() }}</div>
																<div class="vehicles-list__item-details">{{ r.getEtatReclamation() }}</div>
																<div class="vehicles-list__item-links">
																	<a href="/reclamation/update/{{r.getIdReclamation()}} ">Afficher plus de details
																	</a>
																</div>
															</div>
															<button type="button" class="vehicles-list__item-remove" onclick="deleteReclamation({{ r.getIdReclamation() }})">
																<svg width="16" height="16">
																	<path d="M2,4V2h3V1h6v1h3v2H2z M13,13c0,1.1-0.9,2-2,2H5c-1.1,0-2-0.9-2-2V5h10V13z"/>
																</svg>
															</button>
															<script>
																function deleteReclamation(reclamationId) {
if (confirm("Êtes-vous sûr de vouloir supprimer cette réclamation ?")) {
fetch("/reclamation/remove/" + reclamationId, {method: "DELETE"}).then(response => {
if (response.ok) {
window.location.reload();
} else {
alert("Une erreur est survenue lors de la suppression de la réclamation.");
}
});
}
}
															</script>
														</div>
													{% endfor %}


												</div>
											</div>
										</div>

									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="block-space block-space--layout--before-footer"></div>
				</div>
				<!-- site__body / end -->

			</body>
			<!-- Mirrored from red-parts.html.themeforest.scompiler.ru/themes/red-ltr/account-garage.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 21 Mar 2023 22:33:57 GMT -->
		</body>
	</html>
	
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
<!-- Afficher les messages Flash avec Toastr -->
{% for type, messages in app.session.flashBag.all() %}
{% for message in messages %}
   <script>
	  toastr.{{ type }}('{{ message }}');
   </script>
{% endfor %}
{% endfor %}
<style>.flash-messages {
position: fixed;
bottom: 0;
left: 40;
right: 250;
z-index: 9999;
}
/* Personnalisation des messages d'erreur Toastr */
.toast-error {
background-color: red;
}
</style>
{% endblock %}
